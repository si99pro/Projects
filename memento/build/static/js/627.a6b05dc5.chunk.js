"use strict";(self.webpackChunkmemories=self.webpackChunkmemories||[]).push([[627],{687:(e,n,i)=>{i.d(n,{A:()=>o});var s=i(9992),t=i(579);const o=(0,s.A)((0,t.jsx)("path",{d:"M16.59 7.58 10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"CheckCircleOutline")},3627:(e,n,i)=>{i.r(n),i.d(n,{default:()=>b});var s=i(5043),t=i(791),o=i(1729),r=i(9900),a=i(9806),l=i(3969),c=i(172),d=i(4799),u=i(7873),h=i(5895),m=i(2097),g=i(298),x=i(6803),p=i(4343),f=i(1202),j=i(9992),A=i(579);const v=(0,j.A)((0,A.jsx)("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2M9 6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9zm9 14H6V10h12zm-6-3c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2"}),"LockOutlined");var y=i(687);const b=function(){const[e,n]=(0,s.useState)(""),[i,j]=(0,s.useState)(""),[b,w]=(0,s.useState)(""),[k,L]=(0,s.useState)(!1),[C,I]=(0,s.useState)(""),[S,W]=(0,s.useState)({loading:!0,isLoggedIn:!1}),E=(0,r.Zp)();(0,s.useEffect)((()=>{const e=(0,o.hg)(t.j,(e=>{console.log("Auth state changed:",e),e&&e.emailVerified?W({loading:!1,isLoggedIn:!0}):W({loading:!1,isLoggedIn:!1})}));return()=>e()}),[]);const D=b&&b.startsWith("Please verify your email");return S.loading?(0,A.jsx)(a.A,{component:"main",maxWidth:"xs",children:(0,A.jsx)(l.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:(0,A.jsx)(c.A,{})})}):S.isLoggedIn?(0,A.jsx)(a.A,{component:"main",maxWidth:"xs",children:(0,A.jsx)(l.A,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:(0,A.jsxs)(d.A,{elevation:3,sx:{p:{xs:3,sm:4},mt:3,width:"100%",display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center"},children:[(0,A.jsx)(u.A,{sx:{m:1,bgcolor:"success.main"},children:(0,A.jsx)(y.A,{})}),(0,A.jsx)(h.A,{component:"h1",variant:"h5",gutterBottom:!0,children:"Already Logged In"}),(0,A.jsx)(h.A,{variant:"body1",sx:{mb:3},children:"You are already logged in."}),(0,A.jsx)(m.A,{variant:"contained",fullWidth:!0,onClick:()=>E("/dashboard"),children:"Go to Dashboard"})]})})}):(0,A.jsx)(a.A,{component:"main",maxWidth:"xs",children:(0,A.jsxs)(l.A,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,A.jsx)(u.A,{sx:{m:1,bgcolor:"secondary.main"},children:(0,A.jsx)(v,{})}),(0,A.jsx)(h.A,{component:"h1",variant:"h5",gutterBottom:!0,children:"Login"}),(0,A.jsx)(d.A,{elevation:3,sx:{p:{xs:2,sm:4},mt:3,width:"100%",display:"flex",flexDirection:"column",alignItems:"center"},children:(0,A.jsx)(l.A,{component:"form",onSubmit:async n=>{if(n.preventDefault(),w(""),I(""),L(!0),S.isLoggedIn)return L(!1),void E("/dashboard");try{const n=await(0,o.x9)(t.j,e,i);if(!n.user.emailVerified)return w("Please verify your email before logging in. Check your inbox/spam folder."),void L(!1);console.log("Login successful and verified via form, navigating..."),L(!1),E("/dashboard")}catch(s){console.error("Login Error:",s);let e="Login failed. Please check your credentials.";"auth/user-not-found"===s.code||"auth/wrong-password"===s.code||"auth/invalid-credential"===s.code?e="Invalid email or password.":"auth/too-many-requests"===s.code?e="Too many login attempts. Please try again later.":"auth/network-request-failed"===s.code&&(e="Network error. Please check your connection."),w(e),L(!1)}},sx:{width:"100%"},children:(0,A.jsxs)(g.A,{spacing:2,children:[b&&(0,A.jsx)(x.A,{severity:"error",action:D?(0,A.jsx)(m.A,{color:"inherit",size:"small",onClick:async()=>{if(w(""),I("Sending..."),t.j.currentUser)try{await(0,o.gA)(t.j.currentUser),I("Verification email resent. Check your inbox.")}catch(e){console.error("Resend Error:",e),I(`Error resending: ${e.message}`)}else I("Error: No user context found to resend email.")},disabled:"Sending..."===C,children:"Resend Email"}):null,children:b}),C&&!b&&(0,A.jsx)(x.A,{severity:C.startsWith("Error:")?"warning":"info",children:C}),(0,A.jsx)(p.A,{label:"Email Address",value:e,onChange:e=>n(e.target.value),disabled:k,fullWidth:!0,required:!0,autoFocus:!0,autoComplete:"email"}),(0,A.jsx)(p.A,{label:"Password",type:"password",value:i,onChange:e=>j(e.target.value),disabled:k,fullWidth:!0,required:!0,autoComplete:"current-password"}),(0,A.jsxs)(l.A,{sx:{position:"relative",mt:1},children:[(0,A.jsx)(m.A,{type:"submit",fullWidth:!0,variant:"contained",disabled:k,sx:{mt:1,mb:2},children:k?"Logging in...":"Login"}),k&&(0,A.jsx)(c.A,{size:24,sx:{color:"primary.main",position:"absolute",top:"50%",left:"50%",marginTop:"-12px",marginLeft:"-12px"}})]}),(0,A.jsx)(f.A,{component:r.N_,to:"/signup",variant:"body2",align:"center",sx:{display:"block"},children:"Don't have an account? Sign Up"})]})})})]})})}}}]);
//# sourceMappingURL=627.a6b05dc5.chunk.js.map