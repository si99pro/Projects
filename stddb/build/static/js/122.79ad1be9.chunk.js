"use strict";(self.webpackChunkmemories=self.webpackChunkmemories||[]).push([[122],{3122:(e,n,i)=>{i.r(n),i.d(n,{default:()=>ae});var o=i(5043),t=i(791),r=i(5472),a=i(9806),l=i(3969),s=i(7873),d=i(3309),u=i(2843),c=i(5895),x=i(4343),m=i(2097),b=i(3699),p=i(8065),f=i(2579),h=i(172),g=i(6803),v=i(3849),j=i(916),A=i(4339),y=i(3089),k=i(1725),w=i(6711),C=i(1773),S=i(2672),I=i(3683),E=i(5362),Y=i(2950),N=i(923),W=i(7951),D=i(9665),P=i(9073),M=i(3201),O=i(9935),B=i(9685),z=i(2306),U=i(1553),F=i(5903),$=i(579);const G=(0,F.A)(a.A)`
  margin-top: 40px; // Increased top margin
  margin-bottom: 40px;
`,T=(0,F.A)(l.A)`
    text-align: center;
    margin-bottom: 24px;
`,H=(0,F.A)(s.A)`
  width: 120px;
  height: 120px;
  margin: 0 auto 16px;
  font-size: 60px;
  background-color: ${e=>e.profilebg||"#673ab7"}; // Use profilebg color
`,L=(0,F.A)(d.A)`
  margin-bottom: 24px; // Add space below tabs
  border-bottom: 1px solid #e0e0e0;
  .MuiTabs-indicator {
    background-color: #673ab7;
  }
`,R=(0,F.A)(u.A)`
  color: #555; // Slightly darker default color
  text-transform: none; // Use normal case
  font-weight: 500;
  &.Mui-selected {
    color: #673ab7;
    font-weight: 700;
  }
`,Z=(0,F.A)(l.A)`
  background-color: #fff;
  border-radius: 12px; // Slightly more rounded
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08); // Softer shadow
  padding: 32px; // Increased padding
  margin-bottom: 24px;
`,q=(0,F.A)(c.A)`
  font-size: 1.3rem; // Slightly larger
  font-weight: 600;
  margin-bottom: 20px;
  color: #333;
  border-bottom: 1px solid #eee; // Add subtle separator
  padding-bottom: 8px;
`,K=(0,F.A)(x.A)`
    margin-bottom: 16px;
    .MuiInputBase-root.Mui-disabled { // Style disabled fields
        color: rgba(0, 0, 0, 0.7); // Make text slightly darker than default disabled
        background-color: #f9f9f9; // Slight background tint
    }
    .MuiInput-underline:before { // Hide underline for standard variant when not focused
        border-bottom: none;
    }
    .MuiInput-underline:hover:not(.Mui-disabled):before { // Show underline on hover for standard
        border-bottom: 1px solid rgba(0, 0, 0, 0.42);
    }
    .MuiInputBase-input:read-only {
      cursor: default; // Change cursor for read-only standard fields
    }
`,J=(0,F.A)(l.A)`
  display: flex;
  gap: 8px; // Add space between buttons
`,Q=(0,F.A)(m.A)`
  background-color: #673ab7;
  color: #fff;
  &:hover {
    background-color: #512da8;
  }
  &:disabled { // Style disabled save button
    background-color: rgba(0, 0, 0, 0.12);
  }
`,V=(0,F.A)(m.A)`
  color: #757575;
  &:hover {
    background-color: #f5f5f5;
  }
`,X=(0,F.A)(l.A)`
  margin-bottom: 16px;
  padding: 16px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  display: flex;
  align-items: center;
  background-color: #fafafa; // Slight background for items
  position: relative; // For positioning buttons if needed
`,_=(0,F.A)(l.A)`
  margin-left: 16px;
  flex-grow: 1;
`,ee=(0,F.A)(l.A)`
  margin-left: auto; // Pushes actions to the right
  display: flex;
  gap: 4px;
`,ne=(0,F.A)(l.A)`
  margin-top: 16px;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin-bottom: 24px;
  background-color: #fff; // Clear background for form
`;const ie=o.memo((e=>{let{label:n,value:i,fieldName:t,onSave:r,onCancel:a,onChange:l,IconComponent:s,multiline:d=!1,rows:u=1,readOnly:x=!1,prefix:m=null,disabled:g=!1}=e;const[v,j]=(0,o.useState)(!1),[A,y]=(0,o.useState)(i),[k,w]=(0,o.useState)(!1);(0,o.useEffect)((()=>{y(i)}),[i]);const E=async()=>{if(A!==i){w(!0);try{await r(t,A),j(!1)}catch(e){console.error("Save failed:",e)}finally{w(!1)}}else j(!1)},Y=()=>{y(i),j(!1),a&&a(t)};(0,o.useCallback)(function(e,n){let i;return function(){for(var o=arguments.length,t=new Array(o),r=0;r<o;r++)t[r]=arguments[r];clearTimeout(i),i=setTimeout((()=>{clearTimeout(i),e(...t)}),n)}}(E,1e3),[A,t,r]);return(0,$.jsx)(K,{label:n,value:null!==A&&void 0!==A?A:"",onChange:e=>{y(e.target.value),l&&l(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&!d&&v?E():"Escape"===e.key&&v&&Y()},onBlur:()=>{v&&!d&&A!==i?E():v&&!d&&A===i&&Y()},fullWidth:!0,multiline:d,rows:u,variant:v||x?"outlined":"standard",disabled:g||k||x,InputProps:{readOnly:!v||x,startAdornment:(0,$.jsxs)($.Fragment,{children:[s&&(0,$.jsx)(b.A,{position:"start",children:(0,$.jsx)(s,{sx:{mr:m?0:1,color:"action.active"}})}),m&&!v&&(0,$.jsx)(c.A,{variant:"body1",sx:{mr:.5,color:"text.secondary"},children:m})]}),endAdornment:(0,$.jsx)(b.A,{position:"end",children:x?null:v?(0,$.jsxs)(J,{children:[(0,$.jsx)(p.A,{title:"Save",children:(0,$.jsx)(f.A,{onClick:E,"aria-label":"save",size:"small",disabled:k||A===i,color:"primary",children:k?(0,$.jsx)(h.A,{size:20}):(0,$.jsx)(S.A,{})})}),(0,$.jsx)(p.A,{title:"Cancel",children:(0,$.jsx)(f.A,{onClick:Y,"aria-label":"cancel",size:"small",disabled:k,children:(0,$.jsx)(I.A,{})})})]}):(0,$.jsx)(p.A,{title:"Edit",children:(0,$.jsx)(f.A,{onClick:()=>{x||j(!0)},"aria-label":"edit",size:"small",disabled:g,children:(0,$.jsx)(C.A,{})})})})},sx:{...!v&&!x&&{"& .MuiInput-underline:before":{borderBottom:"1px dashed rgba(0, 0, 0, 0.2)"},"&:hover .MuiInput-underline:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.5) !important"}},...x&&{"& .MuiInput-underline:before":{borderBottom:"none"},"& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottom:"none"},"& .MuiInputBase-input":{cursor:"default"}}}})}));const oe=o.memo((e=>{let{workInfo:n,eduInfo:i,onSaveWork:t,onSaveEdu:r,isLoading:a}=e;const[s,d]=(0,o.useState)(null),[u,x]=(0,o.useState)({company:"",position:"",city:"",startYear:"",endYear:"",currentlyWorking:!1}),[b,h]=(0,o.useState)(!1),[g,j]=(0,o.useState)(null),[A,y]=(0,o.useState)({institution:"",degree:"",fieldOfStudy:"",graduationYear:""}),[k,w]=(0,o.useState)(!1),S=()=>{d(null),x({company:"",position:"",city:"",startYear:"",endYear:"",currentlyWorking:!1})},I=()=>{j(null),y({institution:"",degree:"",fieldOfStudy:"",graduationYear:""})},E=(0,o.useMemo)((()=>[...(null===n||void 0===n?void 0:n.workExperience)||[]].sort(((e,n)=>{var i,o;const[,t]=(null===(i=e.duration)||void 0===i?void 0:i.split(" - "))||[],[,r]=(null===(o=n.duration)||void 0===o?void 0:o.split(" - "))||[],a="Present"===t?1/0:parseInt(t||"0",10);return("Present"===r?1/0:parseInt(r||"0",10))-a}))),[null===n||void 0===n?void 0:n.workExperience]),W=(0,o.useMemo)((()=>[...(null===i||void 0===i?void 0:i.educationDetails)||[]].sort(((e,n)=>parseInt(n.graduationYear||"0",10)-parseInt(e.graduationYear||"0",10)))),[null===i||void 0===i?void 0:i.educationDetails]);return(0,$.jsxs)(l.A,{mt:3,children:[(0,$.jsx)(q,{children:"Work Experience"}),a?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(v.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}}),(0,$.jsx)(v.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}})]}):(0,$.jsxs)($.Fragment,{children:[E.map(((e,i)=>(0,$.jsxs)(X,{children:[(0,$.jsx)(N.A,{sx:{mr:1,color:"action.active"}}),(0,$.jsxs)(_,{children:[(0,$.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",children:e.company}),(0,$.jsxs)(c.A,{variant:"body2",color:"textSecondary",children:[e.position," - ",e.city]}),(0,$.jsxs)(c.A,{variant:"body2",color:"textSecondary",children:["Duration: ",e.duration]})]}),s!==i&&(0,$.jsx)(ee,{children:(0,$.jsx)(p.A,{title:"Edit",children:(0,$.jsx)(f.A,{size:"small",onClick:()=>(e=>{var i,o;if(null===n||void 0===n||null===(i=n.workExperience)||void 0===i||!i[e])return;const t=n.workExperience[e],[r="",a=""]=(null===(o=t.duration)||void 0===o?void 0:o.split(" - "))||[],l="Present"===a;x({company:t.company||"",position:t.position||"",city:t.city||"",startYear:r,endYear:l?"":a,currentlyWorking:l}),d(e)})(i),disabled:null!==s||b,children:(0,$.jsx)(C.A,{fontSize:"small"})})})})]},`work-${i}`))),null!==s&&(0,$.jsx)(te,{formData:u,setFormData:x,onSave:async()=>{if(!u.company||!u.position||!u.city||!u.startYear||!u.currentlyWorking&&!u.endYear)return console.error("Work form validation failed"),void alert("Please fill in all required work experience fields.");h(!0);const e=u.currentlyWorking?`${u.startYear} - Present`:`${u.startYear} - ${u.endYear}`,i={company:u.company,position:u.position,city:u.city,duration:e};let o;const r=(null===n||void 0===n?void 0:n.workExperience)||[];if("NEW"===s)o=[...r,i];else{if("number"!==typeof s)return void h(!1);o=[...r],o[s]=i}o.sort(((e,n)=>{var i,o;const[,t]=(null===(i=e.duration)||void 0===i?void 0:i.split(" - "))||[],[,r]=(null===(o=n.duration)||void 0===o?void 0:o.split(" - "))||[],a="Present"===t?1/0:parseInt(t||"0",10);return("Present"===r?1/0:parseInt(r||"0",10))-a}));await t(o)&&S(),h(!1)},onCancel:S,onDelete:"NEW"!==s?()=>(async e=>{h(!0);const i=((null===n||void 0===n?void 0:n.workExperience)||[]).filter(((n,i)=>i!==e));await t(i)&&d(null),h(!1)})(s):void 0,isSaving:b,isNew:"NEW"===s}),null===s&&(0,$.jsx)(m.A,{variant:"outlined",startIcon:(0,$.jsx)(Y.A,{}),onClick:()=>{x({company:"",position:"",city:"",startYear:"",endYear:"",currentlyWorking:!1}),d("NEW")},disabled:b,sx:{mt:1},children:"Add Work Experience"})]}),(0,$.jsxs)(l.A,{mt:5,children:[" ",(0,$.jsx)(q,{children:"Education (MSc/MBA/PhD etc.)"}),a?(0,$.jsxs)($.Fragment,{children:[(0,$.jsx)(v.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}}),(0,$.jsx)(v.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}})]}):(0,$.jsxs)($.Fragment,{children:[W.map(((e,n)=>(0,$.jsxs)(X,{children:[(0,$.jsx)(B.A,{sx:{mr:1,color:"action.active"}}),(0,$.jsxs)(_,{children:[(0,$.jsx)(c.A,{variant:"subtitle1",fontWeight:"bold",children:e.institution}),(0,$.jsxs)(c.A,{variant:"body2",color:"textSecondary",children:[e.degree," in ",e.fieldOfStudy]}),(0,$.jsxs)(c.A,{variant:"body2",color:"textSecondary",children:["Graduated: ",e.graduationYear]})]}),g!==n&&(0,$.jsx)(ee,{children:(0,$.jsx)(p.A,{title:"Edit",children:(0,$.jsx)(f.A,{size:"small",onClick:()=>(e=>{var n;if(null===i||void 0===i||null===(n=i.educationDetails)||void 0===n||!n[e])return;const o=i.educationDetails[e];y({institution:o.institution||"",degree:o.degree||"",fieldOfStudy:o.fieldOfStudy||"",graduationYear:o.graduationYear||""}),j(e)})(n),disabled:null!==g||k,children:(0,$.jsx)(C.A,{fontSize:"small"})})})})]},`edu-${n}`))),null!==g&&(0,$.jsx)(re,{formData:A,setFormData:y,onSave:async()=>{if(!A.institution||!A.degree||!A.fieldOfStudy||!A.graduationYear)return console.error("Education form validation failed"),void alert("Please fill in all required education fields.");w(!0);const e={...A};let n;const o=(null===i||void 0===i?void 0:i.educationDetails)||[];if("NEW"===g)n=[...o,e];else{if("number"!==typeof g)return void w(!1);n=[...o],n[g]=e}n.sort(((e,n)=>parseInt(n.graduationYear||"0",10)-parseInt(e.graduationYear||"0",10)));await r(n)&&I(),w(!1)},onCancel:I,onDelete:"NEW"!==g?()=>(async e=>{w(!0);const n=((null===i||void 0===i?void 0:i.educationDetails)||[]).filter(((n,i)=>i!==e));await r(n)&&j(null),w(!1)})(g):void 0,isSaving:k,isNew:"NEW"===g}),null===g&&(0,$.jsx)(m.A,{variant:"outlined",startIcon:(0,$.jsx)(Y.A,{}),onClick:()=>{y({institution:"",degree:"",fieldOfStudy:"",graduationYear:""}),j("NEW")},disabled:k,sx:{mt:1},children:"Add Education"})]})]})]})})),te=e=>{let{formData:n,setFormData:i,onSave:o,onCancel:t,onDelete:r,isSaving:a,isNew:s}=e;const d=e=>{const{name:n,value:o,type:t,checked:r}=e.target;i((e=>({...e,[n]:"checkbox"===t?r:o})))},u=n.company&&n.position&&n.city&&n.startYear&&(n.currentlyWorking||n.endYear);return(0,$.jsxs)(ne,{children:[(0,$.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:s?"Add New Work Experience":"Edit Work Experience"}),(0,$.jsxs)(y.A,{container:!0,spacing:2,children:[(0,$.jsx)(y.A,{item:!0,xs:12,sm:6,children:(0,$.jsx)(x.A,{label:"Company *",name:"company",value:n.company,onChange:d,fullWidth:!0,margin:"normal",disabled:a})}),(0,$.jsx)(y.A,{item:!0,xs:12,sm:6,children:(0,$.jsx)(x.A,{label:"Position *",name:"position",value:n.position,onChange:d,fullWidth:!0,margin:"normal",disabled:a})}),(0,$.jsx)(y.A,{item:!0,xs:12,children:(0,$.jsx)(x.A,{label:"City/Town *",name:"city",value:n.city,onChange:d,fullWidth:!0,margin:"normal",disabled:a})}),(0,$.jsxs)(y.A,{item:!0,xs:12,children:[(0,$.jsx)(c.A,{variant:"subtitle2",gutterBottom:!0,sx:{mt:1},children:"Time Period *"}),(0,$.jsx)(k.A,{control:(0,$.jsx)(w.A,{name:"currentlyWorking",checked:n.currentlyWorking,onChange:d,disabled:a}),label:"I currently work here"})]}),(0,$.jsx)(y.A,{item:!0,xs:6,children:(0,$.jsx)(x.A,{label:"Start Year *",name:"startYear",value:n.startYear,onChange:d,fullWidth:!0,margin:"dense",disabled:a,type:"number"})}),!n.currentlyWorking&&(0,$.jsx)(y.A,{item:!0,xs:6,children:(0,$.jsx)(x.A,{label:"End Year *",name:"endYear",value:n.endYear,onChange:d,fullWidth:!0,margin:"dense",disabled:a||!n.startYear,type:"number",inputProps:{min:n.startYear||void 0}})})]}),(0,$.jsxs)(l.A,{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,$.jsxs)(J,{children:[(0,$.jsx)(Q,{variant:"contained",onClick:o,disabled:a||!u,children:a?(0,$.jsx)(h.A,{size:24,color:"inherit"}):"Save"}),(0,$.jsx)(V,{onClick:t,disabled:a,children:"Cancel"})]}),!s&&r&&(0,$.jsx)(p.A,{title:"Delete this experience",children:(0,$.jsx)(f.A,{"aria-label":"delete",onClick:r,disabled:a,color:"error",children:(0,$.jsx)(E.A,{})})})]})]})},re=e=>{let{formData:n,setFormData:i,onSave:o,onCancel:t,onDelete:r,isSaving:a,isNew:s}=e;const d=e=>{const{name:n,value:o}=e.target;i((e=>({...e,[n]:o})))},u=n.institution&&n.degree&&n.fieldOfStudy&&n.graduationYear;return(0,$.jsxs)(ne,{children:[(0,$.jsx)(c.A,{variant:"h6",gutterBottom:!0,children:s?"Add New Education":"Edit Education"}),(0,$.jsxs)(y.A,{container:!0,spacing:2,children:[(0,$.jsx)(y.A,{item:!0,xs:12,children:(0,$.jsx)(x.A,{label:"Institution *",name:"institution",value:n.institution,onChange:d,fullWidth:!0,margin:"normal",disabled:a})}),(0,$.jsx)(y.A,{item:!0,xs:12,sm:6,children:(0,$.jsx)(x.A,{label:"Degree *",name:"degree",value:n.degree,onChange:d,fullWidth:!0,margin:"normal",disabled:a})}),(0,$.jsx)(y.A,{item:!0,xs:12,sm:6,children:(0,$.jsx)(x.A,{label:"Field of Study *",name:"fieldOfStudy",value:n.fieldOfStudy,onChange:d,fullWidth:!0,margin:"normal",disabled:a})}),(0,$.jsx)(y.A,{item:!0,xs:12,sm:6,children:(0,$.jsx)(x.A,{label:"Graduation Year *",name:"graduationYear",value:n.graduationYear,onChange:d,fullWidth:!0,margin:"normal",disabled:a,type:"number"})})]}),(0,$.jsxs)(l.A,{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,$.jsxs)(J,{children:[(0,$.jsx)(Q,{variant:"contained",onClick:o,disabled:a||!u,children:a?(0,$.jsx)(h.A,{size:24,color:"inherit"}):"Save"}),(0,$.jsx)(V,{onClick:t,disabled:a,children:"Cancel"})]}),!s&&r&&(0,$.jsx)(p.A,{title:"Delete this education entry",children:(0,$.jsx)(f.A,{"aria-label":"delete",onClick:r,disabled:a,color:"error",children:(0,$.jsx)(E.A,{})})})]})]})},ae=function(){const[e,n]=(0,o.useState)({fullName:null,email:null,studentId:null,batch:null,session:null,profilebg:null}),[i,a]=(0,o.useState)({phoneNumber:null,facebook:null,linkedin:null,website:null}),[s,d]=(0,o.useState)({educationDetails:null}),[u,x]=(0,o.useState)({workExperience:null}),[m,b]=(0,o.useState)({currentCity:null,hometown:null}),[p,f]=(0,o.useState)({birthdate:null,bloodGroup:null,fieldOfExpertise:null,bio:null,aboutYou:null}),[h,y]=(0,o.useState)(0),[k,w]=(0,o.useState)(!0),[C,S]=(0,o.useState)({open:!1,message:"",severity:"success"}),[I,E]=(0,o.useState)(!1);(0,o.useEffect)((()=>{(async()=>{w(!0),n({fullName:null,email:null,studentId:null,batch:null,session:null,profilebg:null}),a({phoneNumber:null,facebook:null,linkedin:null,website:null}),d({educationDetails:null}),x({workExperience:null}),b({currentCity:null,hometown:null}),f({birthdate:null,bloodGroup:null,fieldOfExpertise:null,bio:null,aboutYou:null});try{const e=t.j.currentUser;if(e){const i=(0,r.H9)(t.db,"users",e.uid),o=await(0,r.x7)(i);if(o.exists()){const e=o.data();n(e.basicInfo||{fullName:"",email:"",studentId:"",batch:"",session:"",profilebg:"#673ab7"}),a(e.contactInfo||{phoneNumber:"",facebook:"",linkedin:"",website:""}),d(e.eduInfo||{educationDetails:[]}),x(e.workInfo||{workExperience:[]}),b(e.placeInfo||{currentCity:"",hometown:""}),f(e.detailInfo||{birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""})}else console.log("No profile document found for user:",e.uid),n({fullName:e.displayName||"",email:e.email||"",studentId:"",batch:"",session:"",profilebg:"#673ab7"}),a({phoneNumber:"",facebook:"",linkedin:"",website:""}),d({educationDetails:[]}),x({workExperience:[]}),b({currentCity:"",hometown:""}),f({birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""}),S({open:!0,message:"Profile data not found. Please fill in your details.",severity:"info"})}else console.log("User not logged in"),S({open:!0,message:"Please log in to view your profile.",severity:"warning"}),n({fullName:"",email:"",studentId:"",batch:"",session:"",profilebg:"#673ab7"}),a({phoneNumber:"",facebook:"",linkedin:"",website:""}),d({educationDetails:[]}),x({workExperience:[]}),b({currentCity:"",hometown:""}),f({birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""})}catch(e){console.error("Error fetching profile data:",e),S({open:!0,message:`Failed to load profile data: ${e.message}`,severity:"error"}),n({fullName:"",email:"",studentId:"",batch:"",session:"",profilebg:"#673ab7"}),a({phoneNumber:"",facebook:"",linkedin:"",website:""}),d({educationDetails:[]}),x({workExperience:[]}),b({currentCity:"",hometown:""}),f({birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""})}finally{setTimeout((()=>w(!1)),300)}})()}),[]);const Y=(0,o.useCallback)((async(e,n)=>{S((e=>({...e,open:!1})));const o=t.j.currentUser;if(!o)throw S({open:!0,message:"User not authenticated.",severity:"error"}),new Error("User not authenticated.");const l=(0,r.H9)(t.db,"users",o.uid);let s={},d=()=>{};if(i&&e in i)s[`contactInfo.${e}`]=n,d=()=>a((i=>({...i,[e]:n})));else if(m&&e in m)s[`placeInfo.${e}`]=n,d=()=>b((i=>({...i,[e]:n})));else{if(!p||!(e in p))throw console.error("Unknown field name or state object is null:",e),S({open:!0,message:`Cannot save unknown field: ${e}`,severity:"error"}),new Error(`Unknown field: ${e}`);s[`detailInfo.${e}`]=n,d=()=>f((i=>({...i,[e]:n})))}try{await(0,r.mZ)(l,s),d(),S({open:!0,message:"Profile updated successfully!",severity:"success"}),console.log("Profile updated:",e)}catch(u){throw console.error("Error updating profile field:",e,u),S({open:!0,message:`Error updating profile: ${u.message}`,severity:"error"}),u}}),[i,m,p]),N=(0,o.useCallback)((async e=>{S((e=>({...e,open:!1})));const n=t.j.currentUser;if(!n)return S({open:!0,message:"User not authenticated.",severity:"error"}),!1;const i=(0,r.H9)(t.db,"users",n.uid);try{return await(0,r.mZ)(i,{"workInfo.workExperience":e}),x({workExperience:e}),S({open:!0,message:"Work experience updated.",severity:"success"}),!0}catch(o){return console.error("Error saving work experience:",o),S({open:!0,message:`Error saving work experience: ${o.message}`,severity:"error"}),!1}}),[]),B=(0,o.useCallback)((async e=>{S((e=>({...e,open:!1})));const n=t.j.currentUser;if(!n)return S({open:!0,message:"User not authenticated.",severity:"error"}),!1;const i=(0,r.H9)(t.db,"users",n.uid);try{return await(0,r.mZ)(i,{"eduInfo.educationDetails":e}),d({educationDetails:e}),S({open:!0,message:"Education updated.",severity:"success"}),!0}catch(o){return console.error("Error saving education:",o),S({open:!0,message:`Error saving education: ${o.message}`,severity:"error"}),!1}}),[]),F=()=>{S((e=>({...e,open:!1})))},J=()=>{E(!0)},Q=()=>{E(!1)},V=(0,o.useMemo)((()=>{var n,i,o,t,r;return(0,$.jsxs)(l.A,{mt:3,children:[(0,$.jsx)(q,{children:"Basic Information"}),(0,$.jsx)(K,{label:"Full Name",value:null!==(n=e.fullName)&&void 0!==n?n:"",fullWidth:!0,variant:"standard",InputProps:{readOnly:!0,disableUnderline:!0},onClick:J,sx:{cursor:"not-allowed"}}),(0,$.jsx)(K,{label:"Email",value:null!==(i=e.email)&&void 0!==i?i:"",fullWidth:!0,variant:"standard",InputProps:{readOnly:!0,disableUnderline:!0},onClick:J,sx:{cursor:"not-allowed"}}),(0,$.jsx)(K,{label:"Student ID",value:null!==(o=e.studentId)&&void 0!==o?o:"",fullWidth:!0,variant:"standard",InputProps:{readOnly:!0,disableUnderline:!0},onClick:J,sx:{cursor:"not-allowed"}}),(0,$.jsx)(K,{label:"Batch",value:null!==(t=e.batch)&&void 0!==t?t:"",fullWidth:!0,variant:"standard",InputProps:{readOnly:!0,disableUnderline:!0},onClick:J,sx:{cursor:"not-allowed"}}),(0,$.jsx)(K,{label:"Session",value:null!==(r=e.session)&&void 0!==r?r:"",fullWidth:!0,variant:"standard",InputProps:{readOnly:!0,disableUnderline:!0},onClick:J,sx:{cursor:"not-allowed"}}),(0,$.jsx)(g.A,{severity:"info",sx:{mt:2},children:"Basic information cannot be edited directly. Please contact an administrator if changes are needed."})]})}),[e]),X=(0,o.useMemo)((()=>(0,$.jsx)(oe,{workInfo:u,eduInfo:s,onSaveWork:N,onSaveEdu:B,isLoading:k})),[u,s,N,B,k]),_=(0,o.useMemo)((()=>{var e,n;return(0,$.jsxs)(l.A,{mt:3,children:[(0,$.jsx)(q,{children:"Places Lived"}),(0,$.jsx)(ie,{label:"Current City",value:null!==(e=m.currentCity)&&void 0!==e?e:"",fieldName:"currentCity",onSave:Y,IconComponent:z.A}),(0,$.jsx)(ie,{label:"Hometown",value:null!==(n=m.hometown)&&void 0!==n?n:"",fieldName:"hometown",onSave:Y,IconComponent:z.A})]})}),[m,Y]),ee=(0,o.useMemo)((()=>{var e,n,o,t;return(0,$.jsxs)(l.A,{mt:3,children:[(0,$.jsx)(q,{children:"Contact Information"}),(0,$.jsx)(ie,{label:"Phone Number",value:null!==(e=i.phoneNumber)&&void 0!==e?e:"",fieldName:"phoneNumber",onSave:Y,IconComponent:D.A}),(0,$.jsx)(ie,{label:"Facebook Profile",value:null!==(n=i.facebook)&&void 0!==n?n:"",fieldName:"facebook",onSave:Y,IconComponent:P.A,prefix:"facebook.com/"}),(0,$.jsx)(ie,{label:"LinkedIn Profile",value:null!==(o=i.linkedin)&&void 0!==o?o:"",fieldName:"linkedin",onSave:Y,IconComponent:P.A,prefix:"linkedin.com/in/"}),(0,$.jsx)(ie,{label:"Website",value:null!==(t=i.website)&&void 0!==t?t:"",fieldName:"website",onSave:Y,IconComponent:P.A,prefix:"https://"})]})}),[i,Y]),ne=(0,o.useMemo)((()=>{var e,n,i,o,t;return(0,$.jsxs)(l.A,{mt:3,children:[(0,$.jsx)(q,{children:"Details About You"}),(0,$.jsx)(ie,{label:"Birthdate",value:null!==(e=p.birthdate)&&void 0!==e?e:"",fieldName:"birthdate",onSave:Y,IconComponent:U.A}),(0,$.jsx)(ie,{label:"Blood Group",value:null!==(n=p.bloodGroup)&&void 0!==n?n:"",fieldName:"bloodGroup",onSave:Y,IconComponent:U.A}),(0,$.jsx)(ie,{label:"Field of Expertise",value:null!==(i=p.fieldOfExpertise)&&void 0!==i?i:"",fieldName:"fieldOfExpertise",onSave:Y,IconComponent:U.A}),(0,$.jsx)(ie,{label:"Bio",value:null!==(o=p.bio)&&void 0!==o?o:"",fieldName:"bio",onSave:Y,IconComponent:W.A,multiline:!0,rows:4}),(0,$.jsx)(ie,{label:"About You",value:null!==(t=p.aboutYou)&&void 0!==t?t:"",fieldName:"aboutYou",onSave:Y,IconComponent:W.A,multiline:!0,rows:4})]})}),[p,Y]);return k?(0,$.jsxs)(G,{maxWidth:"md",children:[(0,$.jsxs)(T,{children:[(0,$.jsx)(v.A,{variant:"circular",width:120,height:120,sx:{margin:"0 auto 16px"}}),(0,$.jsx)(v.A,{variant:"text",width:"40%",height:40,sx:{margin:"0 auto 8px"}}),(0,$.jsx)(v.A,{variant:"text",width:"50%",height:24,sx:{margin:"0 auto 16px"}})]}),(0,$.jsxs)(Z,{children:[(0,$.jsx)(v.A,{variant:"rectangular",height:48,sx:{mb:3}}),(0,$.jsx)(v.A,{variant:"text",width:"30%",height:40,sx:{mb:3}})," ",(0,$.jsx)(v.A,{variant:"rectangular",height:56,sx:{mb:2}}),(0,$.jsx)(v.A,{variant:"rectangular",height:56,sx:{mb:2}}),(0,$.jsx)(v.A,{variant:"rectangular",height:56,sx:{mb:2}}),(0,$.jsx)(v.A,{variant:"rectangular",height:56,sx:{mb:2}})]})]}):(0,$.jsx)($.Fragment,{children:(0,$.jsxs)(G,{maxWidth:"md",children:[(0,$.jsxs)(T,{children:[(0,$.jsx)(H,{profilebg:null===e||void 0===e?void 0:e.profilebg,children:null!==e&&void 0!==e&&e.fullName?e.fullName.charAt(0).toUpperCase():"?"}),(0,$.jsx)(c.A,{variant:"h4",component:"h1",gutterBottom:!0,children:(null===e||void 0===e?void 0:e.fullName)||"Your Profile"}),(0,$.jsx)(c.A,{variant:"body1",color:"textSecondary",children:null===e||void 0===e?void 0:e.email})]}),(0,$.jsxs)(Z,{children:[(0,$.jsxs)(L,{value:h,onChange:(e,n)=>{y(n)},"aria-label":"profile tabs",centered:!0,children:[(0,$.jsx)(R,{label:"Basic Info"}),(0,$.jsx)(R,{label:"Work & Education"}),(0,$.jsx)(R,{label:"Places Lived"}),(0,$.jsx)(R,{label:"Contact"}),(0,$.jsx)(R,{label:"Details"})]}),0===h&&V,1===h&&X,2===h&&_,3===h&&ee,4===h&&ne]}),(0,$.jsx)(j.A,{open:C.open,autoHideDuration:6e3,onClose:F,TransitionComponent:A.A,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,$.jsx)(g.A,{onClose:F,severity:C.severity,variant:"filled",sx:{width:"100%",display:"flex",alignItems:"center"},iconMapping:{success:(0,$.jsx)(M.A,{fontSize:"inherit"}),error:(0,$.jsx)(O.A,{fontSize:"inherit"}),info:(0,$.jsx)(U.A,{fontSize:"inherit"}),warning:(0,$.jsx)(O.A,{fontSize:"inherit"})},children:C.message})}),(0,$.jsx)(j.A,{open:I,autoHideDuration:6e3,onClose:Q,TransitionComponent:A.A,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,$.jsx)(g.A,{onClose:Q,severity:"warning",variant:"filled",sx:{width:"100%"},iconMapping:{warning:(0,$.jsx)(O.A,{fontSize:"inherit"})},children:"These fields cannot be edited directly. Please contact the administrator."})})]})})}}}]);
//# sourceMappingURL=122.79ad1be9.chunk.js.map