"use strict";(self.webpackChunkmemories=self.webpackChunkmemories||[]).push([[729],{7729:(e,n,i)=>{i.r(n),i.d(n,{default:()=>se});var r=i(5043),o=i(9900),t=i(791),a=i(5472),l=i(9806),s=i(3969),d=i(7873),u=i(3309),c=i(2843),m=i(5895),x=i(4343),p=i(2097),f=i(3699),b=i(8065),h=i(2579),v=i(172),g=i(6803),A=i(3849),j=i(916),y=i(4339),k=i(3089),w=i(1725),S=i(6711),I=i(1773),C=i(2672),E=i(3683),N=i(5362),Y=i(2950),W=i(923),D=i(7951),O=i(9665),M=i(9073),P=i(3201),B=i(9935),$=i(9685),F=i(2306),z=i(1553),G=i(5903),T=i(903),U=i(579);const H=(0,G.A)(l.A)`
  margin-top: 40px;
  margin-bottom: 40px;
`,L=(0,G.A)(s.A)`
    text-align: center;
    margin-bottom: 24px;
`,R=(0,G.A)(d.A)`
  width: 120px;
  height: 120px;
  margin: 0 auto 16px;
  font-size: 60px;
  background-color: ${e=>e.profilebg||"#673ab7"};
`,q=(0,G.A)(u.A)`
  margin-bottom: 24px;
  border-bottom: 1px solid #e0e0e0;
  .MuiTabs-indicator {
    background-color: #673ab7;
  }
`,Z=(0,G.A)(c.A)`
  color: #555;
  text-transform: none;
  font-weight: 500;
  &.Mui-selected {
    color: #673ab7;
    font-weight: 700;
  }
`,K=(0,G.A)(s.A)`
  background-color: #fff;
  border-radius: 12px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
  padding: 32px;
  margin-bottom: 24px;
`,V=(0,G.A)(m.A)`
  font-size: 1.3rem;
  font-weight: 600;
  margin-bottom: 20px;
  color: #333;
  border-bottom: 1px solid #eee;
  padding-bottom: 8px;
`,J=(0,G.A)(x.A)`
    margin-bottom: 16px;
    .MuiInputBase-root.Mui-disabled {
        color: rgba(0, 0, 0, 0.7);
        background-color: #f9f9f9;
    }
    .MuiInput-underline:before {
        border-bottom: none;
    }
    .MuiInput-underline:hover:not(.Mui-disabled):before {
        border-bottom: 1px solid rgba(0, 0, 0, 0.42);
    }
    .MuiInputBase-input:read-only {
      cursor: default;
    }
`,Q=(0,G.A)(s.A)`
  display: flex;
  gap: 8px;
`,X=(0,G.A)(p.A)`
  background-color: #673ab7;
  color: #fff;
  &:hover {
    background-color: #512da8;
  }
  &:disabled {
    background-color: rgba(0, 0, 0, 0.12);
  }
`,_=(0,G.A)(p.A)`
  color: #757575;
  &:hover {
    background-color: #f5f5f5;
  }
`,ee=(0,G.A)(s.A)`
  margin-bottom: 16px;
  padding: 16px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  display: flex;
  align-items: center;
  background-color: #fafafa;
  position: relative;
`,ne=(0,G.A)(s.A)`
  margin-left: 16px;
  flex-grow: 1;
`,ie=(0,G.A)(s.A)`
  margin-left: auto;
  display: flex;
  gap: 4px;
`,re=(0,G.A)(s.A)`
  margin-top: 16px;
  padding: 20px;
  border: 1px solid #ccc;
  border-radius: 8px;
  margin-bottom: 24px;
  background-color: #fff;
`;const oe=r.memo((e=>{let{label:n,value:i,fieldName:o,onSave:t,onCancel:a,onChange:l,IconComponent:s,multiline:d=!1,rows:u=1,readOnly:c=!1,prefix:x=null,disabled:p=!1,isAdmin:g=!1}=e;const[A,j]=(0,r.useState)(!1),[y,k]=(0,r.useState)(i),[w,S]=(0,r.useState)(!1),N=!c&&g;(0,r.useEffect)((()=>{k(i),!N&&A&&(j(!1),k(i))}),[i,N]);const Y=async()=>{if(N&&y!==i){S(!0);try{await t(o,y),j(!1)}catch(e){console.error("Save failed:",e)}finally{S(!1)}}else j(!1)},W=()=>{k(i),j(!1),a&&a(o)},D=((0,r.useCallback)(function(e,n){let i;return function(){for(var r=arguments.length,o=new Array(r),t=0;t<r;t++)o[t]=arguments[t];clearTimeout(i),i=setTimeout((()=>{clearTimeout(i),e(...o)}),n)}}(Y,1e3),[y,o,t,N]),!A||!N),O=A&&N?"outlined":"standard";return(0,U.jsx)(J,{label:n,value:null!==y&&void 0!==y?y:"",onChange:e=>{k(e.target.value),l&&l(e.target.value)},onKeyDown:e=>{N&&("Enter"===e.key&&!d&&A?Y():"Escape"===e.key&&A&&W())},onBlur:()=>{N&&(A&&!d&&y!==i?Y():A&&!d&&y===i&&W())},fullWidth:!0,multiline:d,rows:u,variant:O,disabled:p||w||!N,InputProps:{readOnly:D,startAdornment:(0,U.jsxs)(U.Fragment,{children:[s&&(0,U.jsx)(f.A,{position:"start",children:(0,U.jsx)(s,{sx:{mr:x?0:1,color:"action.active"}})}),x&&!A&&(0,U.jsx)(m.A,{variant:"body1",sx:{mr:.5,color:"text.secondary"},children:x})]}),endAdornment:N&&(0,U.jsx)(f.A,{position:"end",children:A?(0,U.jsxs)(Q,{children:[(0,U.jsx)(b.A,{title:"Save",children:(0,U.jsx)(h.A,{onClick:Y,"aria-label":"save",size:"small",disabled:w||y===i,color:"primary",children:w?(0,U.jsx)(v.A,{size:20}):(0,U.jsx)(C.A,{})})}),(0,U.jsx)(b.A,{title:"Cancel",children:(0,U.jsx)(h.A,{onClick:W,"aria-label":"cancel",size:"small",disabled:w,children:(0,U.jsx)(E.A,{})})})]}):(0,U.jsx)(b.A,{title:"Edit",children:(0,U.jsx)(h.A,{onClick:()=>{N&&j(!0)},"aria-label":"edit",size:"small",disabled:p||w,children:(0,U.jsx)(I.A,{})})})})},sx:{...(D||"standard"===O)&&{"& .MuiInput-underline:before":{borderBottom:"1px dashed rgba(0, 0, 0, 0.1)"},"&:hover .MuiInput-underline:before":{borderBottom:"1px solid rgba(0, 0, 0, 0.3) !important"},...(c||!g)&&{"& .MuiInput-underline:before":{borderBottom:"none"},"& .MuiInput-underline:after":{borderBottom:"none"},"& .MuiInput-underline:hover:not(.Mui-disabled):before":{borderBottom:"none !important"},"& .MuiInputBase-input":{cursor:"default"}}}}})}));const te=r.memo((e=>{let{workInfo:n,eduInfo:i,onSaveWork:o,onSaveEdu:t,isLoading:a,isAdmin:l}=e;const[d,u]=(0,r.useState)(null),[c,x]=(0,r.useState)({company:"",position:"",city:"",startYear:"",endYear:"",currentlyWorking:!1}),[f,v]=(0,r.useState)(!1),[g,j]=(0,r.useState)(null),[y,k]=(0,r.useState)({institution:"",degree:"",fieldOfStudy:"",graduationYear:""}),[w,S]=(0,r.useState)(!1),C=()=>{u(null),x({company:"",position:"",city:"",startYear:"",endYear:"",currentlyWorking:!1})},E=()=>{j(null),k({institution:"",degree:"",fieldOfStudy:"",graduationYear:""})},N=(0,r.useMemo)((()=>[...(null===n||void 0===n?void 0:n.workExperience)||[]].sort(((e,n)=>{var i,r;const[,o]=(null===(i=e.duration)||void 0===i?void 0:i.split(" - "))||[],[,t]=(null===(r=n.duration)||void 0===r?void 0:r.split(" - "))||[],a="Present"===o?1/0:parseInt(o||"0",10);return("Present"===t?1/0:parseInt(t||"0",10))-a}))),[null===n||void 0===n?void 0:n.workExperience]),D=(0,r.useMemo)((()=>[...(null===i||void 0===i?void 0:i.educationDetails)||[]].sort(((e,n)=>parseInt(n.graduationYear||"0",10)-parseInt(e.graduationYear||"0",10)))),[null===i||void 0===i?void 0:i.educationDetails]);return(0,U.jsxs)(s.A,{mt:3,children:[(0,U.jsx)(V,{children:"Work Experience"}),a?(0,U.jsxs)(U.Fragment,{children:[" ",(0,U.jsx)(A.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}})," ",(0,U.jsx)(A.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}})," "]}):(0,U.jsxs)(U.Fragment,{children:[N.map(((e,i)=>(0,U.jsxs)(ee,{children:[(0,U.jsx)(W.A,{sx:{mr:1,color:"action.active"}}),(0,U.jsxs)(ne,{children:[" ",(0,U.jsx)(m.A,{variant:"subtitle1",fontWeight:"bold",children:e.company}),(0,U.jsxs)(m.A,{variant:"body2",color:"textSecondary",children:[e.position," - ",e.city]}),(0,U.jsxs)(m.A,{variant:"body2",color:"textSecondary",children:["Duration: ",e.duration]})]}),l&&d!==i&&(0,U.jsx)(ie,{children:(0,U.jsx)(b.A,{title:"Edit",children:(0,U.jsx)(h.A,{size:"small",onClick:()=>(e=>{var i,r;if(!l)return;if(null===n||void 0===n||null===(i=n.workExperience)||void 0===i||!i[e])return;const o=n.workExperience[e],[t="",a=""]=(null===(r=o.duration)||void 0===r?void 0:r.split(" - "))||[],s="Present"===a;x({company:o.company||"",position:o.position||"",city:o.city||"",startYear:t,endYear:s?"":a,currentlyWorking:s}),u(e)})(i),disabled:null!==d||f,children:(0,U.jsx)(I.A,{fontSize:"small"})})})})]},`work-${i}`))),null!==d&&(0,U.jsx)(ae,{formData:c,setFormData:x,onSave:async()=>{if(!l)return;if(!c.company||!c.position||!c.city||!c.startYear||!c.currentlyWorking&&!c.endYear)return void alert("Please fill in all required work experience fields.");v(!0);const e=c.currentlyWorking?`${c.startYear} - Present`:`${c.startYear} - ${c.endYear}`,i={company:c.company,position:c.position,city:c.city,duration:e};let r;const t=(null===n||void 0===n?void 0:n.workExperience)||[];if("NEW"===d)r=[...t,i];else{if("number"!==typeof d)return void v(!1);r=[...t],r[d]=i}r.sort(((e,n)=>{var i,r;const[,o]=(null===(i=e.duration)||void 0===i?void 0:i.split(" - "))||[],[,t]=(null===(r=n.duration)||void 0===r?void 0:r.split(" - "))||[],a="Present"===o?1/0:parseInt(o||"0",10);return("Present"===t?1/0:parseInt(t||"0",10))-a}));await o(r)&&C(),v(!1)},onCancel:C,onDelete:l&&"NEW"!==d?()=>(async e=>{if(!l)return;v(!0);const i=((null===n||void 0===n?void 0:n.workExperience)||[]).filter(((n,i)=>i!==e));await o(i)&&u(null),v(!1)})(d):void 0,isSaving:f,isNew:"NEW"===d,isAdmin:l}),l&&null===d&&(0,U.jsx)(p.A,{variant:"outlined",startIcon:(0,U.jsx)(Y.A,{}),onClick:()=>{l&&(x({company:"",position:"",city:"",startYear:"",endYear:"",currentlyWorking:!1}),u("NEW"))},disabled:f,sx:{mt:1},children:"Add Work Experience"})]}),(0,U.jsxs)(s.A,{mt:5,children:[(0,U.jsx)(V,{children:"Education (MSc/MBA/PhD etc.)"}),a?(0,U.jsxs)(U.Fragment,{children:[" ",(0,U.jsx)(A.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}})," ",(0,U.jsx)(A.A,{variant:"rectangular",height:80,sx:{mb:2,borderRadius:"8px"}})," "]}):(0,U.jsxs)(U.Fragment,{children:[D.map(((e,n)=>(0,U.jsxs)(ee,{children:[(0,U.jsx)($.A,{sx:{mr:1,color:"action.active"}}),(0,U.jsxs)(ne,{children:[" ",(0,U.jsx)(m.A,{variant:"subtitle1",fontWeight:"bold",children:e.institution}),(0,U.jsxs)(m.A,{variant:"body2",color:"textSecondary",children:[e.degree," in ",e.fieldOfStudy]}),(0,U.jsxs)(m.A,{variant:"body2",color:"textSecondary",children:["Graduated: ",e.graduationYear]})]}),l&&g!==n&&(0,U.jsx)(ie,{children:(0,U.jsx)(b.A,{title:"Edit",children:(0,U.jsx)(h.A,{size:"small",onClick:()=>(e=>{var n;if(!l)return;if(null===i||void 0===i||null===(n=i.educationDetails)||void 0===n||!n[e])return;const r=i.educationDetails[e];k({institution:r.institution||"",degree:r.degree||"",fieldOfStudy:r.fieldOfStudy||"",graduationYear:r.graduationYear||""}),j(e)})(n),disabled:null!==g||w,children:(0,U.jsx)(I.A,{fontSize:"small"})})})})]},`edu-${n}`))),null!==g&&(0,U.jsx)(le,{formData:y,setFormData:k,onSave:async()=>{if(!l)return;if(!y.institution||!y.degree||!y.fieldOfStudy||!y.graduationYear)return void alert("Please fill in all required education fields.");S(!0);const e={...y};let n;const r=(null===i||void 0===i?void 0:i.educationDetails)||[];if("NEW"===g)n=[...r,e];else{if("number"!==typeof g)return void S(!1);n=[...r],n[g]=e}n.sort(((e,n)=>parseInt(n.graduationYear||"0",10)-parseInt(e.graduationYear||"0",10)));await t(n)&&E(),S(!1)},onCancel:E,onDelete:l&&"NEW"!==g?()=>(async e=>{if(!l)return;S(!0);const n=((null===i||void 0===i?void 0:i.educationDetails)||[]).filter(((n,i)=>i!==e));await t(n)&&j(null),S(!1)})(g):void 0,isSaving:w,isNew:"NEW"===g,isAdmin:l}),l&&null===g&&(0,U.jsx)(p.A,{variant:"outlined",startIcon:(0,U.jsx)(Y.A,{}),onClick:()=>{l&&(k({institution:"",degree:"",fieldOfStudy:"",graduationYear:""}),j("NEW"))},disabled:w,sx:{mt:1},children:"Add Education"})]})]})]})})),ae=e=>{let{formData:n,setFormData:i,onSave:r,onCancel:o,onDelete:t,isSaving:a,isNew:l,isAdmin:d}=e;const u=e=>{const{name:n,value:r,type:o,checked:t}=e.target;i((e=>({...e,[n]:"checkbox"===o?t:r})))},c=d&&n.company&&n.position&&n.city&&n.startYear&&(n.currentlyWorking||n.endYear),p=!d||a;return(0,U.jsxs)(re,{children:[(0,U.jsx)(m.A,{variant:"h6",gutterBottom:!0,children:l?"Add New Work Experience":"Edit Work Experience"}),(0,U.jsxs)(k.A,{container:!0,spacing:2,children:[(0,U.jsx)(k.A,{item:!0,xs:12,sm:6,children:(0,U.jsx)(x.A,{label:"Company *",name:"company",value:n.company,onChange:u,fullWidth:!0,margin:"normal",disabled:p})}),(0,U.jsx)(k.A,{item:!0,xs:12,sm:6,children:(0,U.jsx)(x.A,{label:"Position *",name:"position",value:n.position,onChange:u,fullWidth:!0,margin:"normal",disabled:p})}),(0,U.jsx)(k.A,{item:!0,xs:12,children:(0,U.jsx)(x.A,{label:"City/Town *",name:"city",value:n.city,onChange:u,fullWidth:!0,margin:"normal",disabled:p})}),(0,U.jsxs)(k.A,{item:!0,xs:12,children:[(0,U.jsx)(m.A,{variant:"subtitle2",gutterBottom:!0,sx:{mt:1},children:"Time Period *"}),(0,U.jsx)(w.A,{control:(0,U.jsx)(S.A,{name:"currentlyWorking",checked:n.currentlyWorking,onChange:u,disabled:p}),label:"I currently work here"})]}),(0,U.jsx)(k.A,{item:!0,xs:6,children:(0,U.jsx)(x.A,{label:"Start Year *",name:"startYear",value:n.startYear,onChange:u,fullWidth:!0,margin:"dense",disabled:p,type:"number"})}),!n.currentlyWorking&&(0,U.jsx)(k.A,{item:!0,xs:6,children:(0,U.jsx)(x.A,{label:"End Year *",name:"endYear",value:n.endYear,onChange:u,fullWidth:!0,margin:"dense",disabled:p||!n.startYear,type:"number",inputProps:{min:n.startYear||void 0}})})]}),(0,U.jsxs)(s.A,{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,U.jsxs)(Q,{children:[(0,U.jsx)(X,{variant:"contained",onClick:r,disabled:p||!c,children:a?(0,U.jsx)(v.A,{size:24,color:"inherit"}):"Save"}),(0,U.jsx)(_,{onClick:o,disabled:p,children:"Cancel"})]}),d&&!l&&t&&(0,U.jsx)(b.A,{title:"Delete this experience",children:(0,U.jsx)(h.A,{"aria-label":"delete",onClick:t,disabled:p,color:"error",children:(0,U.jsx)(N.A,{})})})]})]})},le=e=>{let{formData:n,setFormData:i,onSave:r,onCancel:o,onDelete:t,isSaving:a,isNew:l,isAdmin:d}=e;const u=e=>{const{name:n,value:r}=e.target;i((e=>({...e,[n]:r})))},c=d&&n.institution&&n.degree&&n.fieldOfStudy&&n.graduationYear,p=!d||a;return(0,U.jsxs)(re,{children:[(0,U.jsx)(m.A,{variant:"h6",gutterBottom:!0,children:l?"Add New Education":"Edit Education"}),(0,U.jsxs)(k.A,{container:!0,spacing:2,children:[(0,U.jsx)(k.A,{item:!0,xs:12,children:(0,U.jsx)(x.A,{label:"Institution *",name:"institution",value:n.institution,onChange:u,fullWidth:!0,margin:"normal",disabled:p})}),(0,U.jsx)(k.A,{item:!0,xs:12,sm:6,children:(0,U.jsx)(x.A,{label:"Degree *",name:"degree",value:n.degree,onChange:u,fullWidth:!0,margin:"normal",disabled:p})}),(0,U.jsx)(k.A,{item:!0,xs:12,sm:6,children:(0,U.jsx)(x.A,{label:"Field of Study *",name:"fieldOfStudy",value:n.fieldOfStudy,onChange:u,fullWidth:!0,margin:"normal",disabled:p})}),(0,U.jsx)(k.A,{item:!0,xs:12,sm:6,children:(0,U.jsx)(x.A,{label:"Graduation Year *",name:"graduationYear",value:n.graduationYear,onChange:u,fullWidth:!0,margin:"normal",disabled:p,type:"number"})})]}),(0,U.jsxs)(s.A,{mt:3,display:"flex",justifyContent:"space-between",alignItems:"center",children:[(0,U.jsxs)(Q,{children:[(0,U.jsx)(X,{variant:"contained",onClick:r,disabled:p||!c,children:a?(0,U.jsx)(v.A,{size:24,color:"inherit"}):"Save"}),(0,U.jsx)(_,{onClick:o,disabled:p,children:"Cancel"})]}),d&&!l&&t&&(0,U.jsx)(b.A,{title:"Delete this education entry",children:(0,U.jsx)(h.A,{"aria-label":"delete",onClick:t,disabled:p,color:"error",children:(0,U.jsx)(N.A,{})})})]})]})},se=function(){const{userId:e}=(0,o.g)(),[n,i]=(0,r.useState)({fullName:null,email:null,studentId:null,batch:null,session:null,profilebg:null}),[l,d]=(0,r.useState)({phoneNumber:null,facebook:null,linkedin:null,website:null}),[u,c]=(0,r.useState)({educationDetails:null}),[x,p]=(0,r.useState)({workExperience:null}),[f,h]=(0,r.useState)({currentCity:null,hometown:null}),[v,k]=(0,r.useState)({birthdate:null,bloodGroup:null,fieldOfExpertise:null,bio:null,aboutYou:null}),[w,S]=(0,r.useState)(0),[I,C]=(0,r.useState)(!0),[E,N]=(0,r.useState)(!1),[Y,W]=(0,r.useState)(!0),[$,G]=(0,r.useState)({open:!1,message:"",severity:"success"});(0,r.useEffect)((()=>{(async()=>{C(!0),N(!1),W(!0),i({fullName:null,email:null,studentId:null,batch:null,session:null,profilebg:null}),d({phoneNumber:null,facebook:null,linkedin:null,website:null}),c({educationDetails:null}),p({workExperience:null}),h({currentCity:null,hometown:null}),k({birthdate:null,bloodGroup:null,fieldOfExpertise:null,bio:null,aboutYou:null});const n=t.j.currentUser;let r=!1;if(n)try{const e=(0,a.H9)(t.db,"users",n.uid),i=await(0,a.x7)(e);i.exists()&&"admin"===i.data().role&&(r=!0)}catch(o){console.error("Error fetching viewing user's role:",o)}if(N(r),!e)return console.error("No userId provided in URL"),G({open:!0,message:"Invalid user profile link.",severity:"error"}),W(!1),void C(!1);try{const n=(0,a.H9)(t.db,"users",e),r=await(0,a.x7)(n);if(r.exists()){const e=r.data();i(e.basicInfo||{fullName:"",email:"",studentId:"",batch:"",session:"",profilebg:"#673ab7"}),d(e.contactInfo||{phoneNumber:"",facebook:"",linkedin:"",website:""}),c(e.eduInfo||{educationDetails:[]}),p(e.workInfo||{workExperience:[]}),h(e.placeInfo||{currentCity:"",hometown:""}),k(e.detailInfo||{birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""})}else console.log("No profile document found for user ID:",e),G({open:!0,message:"User profile not found.",severity:"error"}),W(!1),i({fullName:"N/A",email:"N/A",studentId:"",batch:"",session:"",profilebg:"#bdbdbd"}),d({phoneNumber:"",facebook:"",linkedin:"",website:""}),c({educationDetails:[]}),p({workExperience:[]}),h({currentCity:"",hometown:""}),k({birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""})}catch(o){console.error("Error fetching profile data:",o),G({open:!0,message:`Failed to load profile data: ${o.message}`,severity:"error"}),W(!1),i({fullName:"Error",email:"Error",studentId:"",batch:"",session:"",profilebg:"#bdbdbd"}),d({phoneNumber:"",facebook:"",linkedin:"",website:""}),c({educationDetails:[]}),p({workExperience:[]}),h({currentCity:"",hometown:""}),k({birthdate:"",bloodGroup:"",fieldOfExpertise:"",bio:"",aboutYou:""})}finally{setTimeout((()=>C(!1)),300)}})()}),[e]);const J=(0,r.useCallback)((async(r,o)=>{if(G((e=>({...e,open:!1}))),!E)throw console.error("Permission Denied: Only admins can edit profiles."),G({open:!0,message:"You do not have permission to edit this profile.",severity:"error"}),new Error("Permission Denied.");if(!e)throw G({open:!0,message:"Invalid user profile.",severity:"error"}),new Error("Invalid user ID.");const s=(0,a.H9)(t.db,"users",e);let u={},c=()=>{};if(n&&r in n){if("email"===r||"studentId"===r)throw console.warn(`Admin attempted to edit read-only field: ${r}`),G({open:!0,message:`Field '${r}' cannot be edited directly.`,severity:"warning"}),new Error(`Field '${r}' is read-only.`);u[`basicInfo.${r}`]=o,c=()=>i((e=>({...e,[r]:o})))}else if(l&&r in l)u[`contactInfo.${r}`]=o,c=()=>d((e=>({...e,[r]:o})));else if(f&&r in f)u[`placeInfo.${r}`]=o,c=()=>h((e=>({...e,[r]:o})));else{if(!v||!(r in v))throw console.error("Unknown field name or state object is null:",r),G({open:!0,message:`Cannot save unknown field: ${r}`,severity:"error"}),new Error(`Unknown field: ${r}`);u[`detailInfo.${r}`]=o,c=()=>k((e=>({...e,[r]:o})))}try{await(0,a.mZ)(s,u),c(),G({open:!0,message:"Profile updated successfully!",severity:"success"}),console.log(`Admin updated profile ${e}:`,r)}catch(m){throw console.error("Error updating profile field:",r,m),G({open:!0,message:`Error updating profile: ${m.message}`,severity:"error"}),m}}),[E,e,n,l,f,v]),Q=(0,r.useCallback)((async n=>{if(G((e=>({...e,open:!1}))),!E)return G({open:!0,message:"You do not have permission to edit this profile.",severity:"error"}),!1;if(!e)return G({open:!0,message:"Invalid user profile.",severity:"error"}),!1;const i=(0,a.H9)(t.db,"users",e);try{return await(0,a.mZ)(i,{"workInfo.workExperience":n}),p({workExperience:n}),G({open:!0,message:"Work experience updated.",severity:"success"}),!0}catch(r){return console.error("Error saving work experience:",r),G({open:!0,message:`Error saving work experience: ${r.message}`,severity:"error"}),!1}}),[E,e]),X=(0,r.useCallback)((async n=>{if(G((e=>({...e,open:!1}))),!E)return G({open:!0,message:"You do not have permission to edit this profile.",severity:"error"}),!1;if(!e)return G({open:!0,message:"Invalid user profile.",severity:"error"}),!1;const i=(0,a.H9)(t.db,"users",e);try{return await(0,a.mZ)(i,{"eduInfo.educationDetails":n}),c({educationDetails:n}),G({open:!0,message:"Education updated.",severity:"success"}),!0}catch(r){return console.error("Error saving education:",r),G({open:!0,message:`Error saving education: ${r.message}`,severity:"error"}),!1}}),[E,e]),_=()=>{G((e=>({...e,open:!1})))},ee=(0,r.useMemo)((()=>{var e,i,r,o,t;return(0,U.jsxs)(s.A,{mt:3,children:[(0,U.jsx)(V,{children:"Basic Information"}),(0,U.jsx)(oe,{label:"Full Name",value:null!==(e=n.fullName)&&void 0!==e?e:"",fieldName:"fullName",onSave:J,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Email",value:null!==(i=n.email)&&void 0!==i?i:"",fieldName:"email",onSave:J,isAdmin:E,readOnly:!0}),(0,U.jsx)(oe,{label:"Student ID",value:null!==(r=n.studentId)&&void 0!==r?r:"",fieldName:"studentId",onSave:J,isAdmin:E,readOnly:!0}),(0,U.jsx)(oe,{label:"Batch",value:null!==(o=n.batch)&&void 0!==o?o:"",fieldName:"batch",onSave:J,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Session",value:null!==(t=n.session)&&void 0!==t?t:"",fieldName:"session",onSave:J,isAdmin:E,readOnly:!1}),!E&&n.email&&(0,U.jsx)(g.A,{severity:"info",sx:{mt:2},children:"Contact an administrator if changes are needed for read-only fields."})]})}),[n,E,J]),ne=(0,r.useMemo)((()=>(0,U.jsx)(te,{workInfo:x,eduInfo:u,onSaveWork:Q,onSaveEdu:X,isLoading:I,isAdmin:E})),[x,u,Q,X,I,E]),ie=(0,r.useMemo)((()=>{var e,n;return(0,U.jsxs)(s.A,{mt:3,children:[(0,U.jsx)(V,{children:"Places Lived"}),(0,U.jsx)(oe,{label:"Current City",value:null!==(e=f.currentCity)&&void 0!==e?e:"",fieldName:"currentCity",onSave:J,IconComponent:F.A,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Hometown",value:null!==(n=f.hometown)&&void 0!==n?n:"",fieldName:"hometown",onSave:J,IconComponent:F.A,isAdmin:E,readOnly:!1})]})}),[f,J,E]),re=(0,r.useMemo)((()=>{var e,n,i,r;return(0,U.jsxs)(s.A,{mt:3,children:[(0,U.jsx)(V,{children:"Contact Information"}),(0,U.jsx)(oe,{label:"Phone Number",value:null!==(e=l.phoneNumber)&&void 0!==e?e:"",fieldName:"phoneNumber",onSave:J,IconComponent:O.A,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Facebook Profile",value:null!==(n=l.facebook)&&void 0!==n?n:"",fieldName:"facebook",onSave:J,IconComponent:M.A,prefix:"facebook.com/",isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"LinkedIn Profile",value:null!==(i=l.linkedin)&&void 0!==i?i:"",fieldName:"linkedin",onSave:J,IconComponent:M.A,prefix:"linkedin.com/in/",isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Website",value:null!==(r=l.website)&&void 0!==r?r:"",fieldName:"website",onSave:J,IconComponent:M.A,prefix:"https://",isAdmin:E,readOnly:!1})]})}),[l,J,E]),ae=(0,r.useMemo)((()=>{var e,n,i,r,o;return(0,U.jsxs)(s.A,{mt:3,children:[(0,U.jsx)(V,{children:"Details About User"})," ",(0,U.jsx)(oe,{label:"Birthdate",value:null!==(e=v.birthdate)&&void 0!==e?e:"",fieldName:"birthdate",onSave:J,IconComponent:z.A,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Blood Group",value:null!==(n=v.bloodGroup)&&void 0!==n?n:"",fieldName:"bloodGroup",onSave:J,IconComponent:z.A,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Field of Expertise",value:null!==(i=v.fieldOfExpertise)&&void 0!==i?i:"",fieldName:"fieldOfExpertise",onSave:J,IconComponent:z.A,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"Bio",value:null!==(r=v.bio)&&void 0!==r?r:"",fieldName:"bio",onSave:J,IconComponent:D.A,multiline:!0,rows:4,isAdmin:E,readOnly:!1}),(0,U.jsx)(oe,{label:"About User",value:null!==(o=v.aboutYou)&&void 0!==o?o:"",fieldName:"aboutYou",onSave:J,IconComponent:D.A,multiline:!0,rows:4,isAdmin:E,readOnly:!1})]})}),[v,J,E]);return I?(0,U.jsxs)(H,{maxWidth:"md",children:[(0,U.jsxs)(L,{children:[(0,U.jsx)(A.A,{variant:"circular",width:120,height:120,sx:{margin:"0 auto 16px"}}),(0,U.jsx)(A.A,{variant:"text",width:"40%",height:40,sx:{margin:"0 auto 8px"}}),(0,U.jsx)(A.A,{variant:"text",width:"50%",height:24,sx:{margin:"0 auto 16px"}})]}),(0,U.jsxs)(K,{children:[(0,U.jsx)(A.A,{variant:"rectangular",height:48,sx:{mb:3}}),(0,U.jsx)(A.A,{variant:"text",width:"30%",height:40,sx:{mb:3}}),(0,U.jsx)(A.A,{variant:"rectangular",height:56,sx:{mb:2}}),(0,U.jsx)(A.A,{variant:"rectangular",height:56,sx:{mb:2}}),(0,U.jsx)(A.A,{variant:"rectangular",height:56,sx:{mb:2}}),(0,U.jsx)(A.A,{variant:"rectangular",height:56,sx:{mb:2}})]})]}):Y?(0,U.jsx)(U.Fragment,{children:(0,U.jsxs)(H,{maxWidth:"md",children:[(0,U.jsxs)(L,{children:[(0,U.jsx)(R,{profilebg:null===n||void 0===n?void 0:n.profilebg,children:null!==n&&void 0!==n&&n.fullName?n.fullName.charAt(0).toUpperCase():"?"}),(0,U.jsxs)(m.A,{variant:"h4",component:"h1",gutterBottom:!0,children:[(null===n||void 0===n?void 0:n.fullName)||"User Profile",E&&(0,U.jsx)(b.A,{title:"Admin View: Editing Enabled",children:(0,U.jsx)(T.A,{color:"primary",sx:{ml:1,verticalAlign:"middle"}})})]}),(0,U.jsx)(m.A,{variant:"body1",color:"textSecondary",children:null===n||void 0===n?void 0:n.email})]}),(0,U.jsxs)(K,{children:[(0,U.jsxs)(q,{value:w,onChange:(e,n)=>{S(n)},"aria-label":"profile tabs",centered:!0,children:[(0,U.jsx)(Z,{label:"Basic Info"}),(0,U.jsx)(Z,{label:"Work & Education"}),(0,U.jsx)(Z,{label:"Places Lived"}),(0,U.jsx)(Z,{label:"Contact"}),(0,U.jsx)(Z,{label:"Details"})]}),0===w&&ee,1===w&&ne,2===w&&ie,3===w&&re,4===w&&ae]}),(0,U.jsx)(j.A,{open:$.open,autoHideDuration:6e3,onClose:_,TransitionComponent:y.A,anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,U.jsx)(g.A,{onClose:_,severity:$.severity,variant:"filled",sx:{width:"100%",display:"flex",alignItems:"center"},iconMapping:{success:(0,U.jsx)(P.A,{fontSize:"inherit"}),error:(0,U.jsx)(B.A,{fontSize:"inherit"}),info:(0,U.jsx)(z.A,{fontSize:"inherit"}),warning:(0,U.jsx)(B.A,{fontSize:"inherit"})},children:$.message})})]})}):(0,U.jsx)(H,{maxWidth:"md",children:(0,U.jsxs)(g.A,{severity:"error",sx:{mt:5,p:3},children:[(0,U.jsx)(m.A,{variant:"h6",children:"Profile Not Found"}),(0,U.jsxs)(m.A,{children:["The requested user profile (ID: ",e,") does not exist or could not be loaded."]})]})})}}}]);
//# sourceMappingURL=729.828af9c1.chunk.js.map